# Система спавна предметов и лута

Основные классы системы спавна предметов и лута: **GS\_ProtocolTerminate**, **BP\_Spawner** и **BP\_ItemSocket**.

* **GS\_ProtocolTerminate** — отвечает за получение сида, чтобы предметы генерировались одинаково на всех клиентах.
* **BP\_Spawner** — отвечает за создание предметов на сокетах.

#### Настройка сокетов на карте

Чтобы добавить сокеты на карту:

1. Перетащите **BP\_Spawner** на карту, выберите его и откройте вкладку **Details**.
2.  Найдите нужный массив:

    * **LootSockets** — массив сокетов для спавна лута.
    * **ItemSockets** — массив сокетов для спавна предметов.

    Для выбора сокета используйте пипетку справа от индекса массива и кликните на нужный сокет.

<figure><img src="../../../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>

3 В **BP\_Spawner** укажите таблицы и ряды, отвечающие за спавн предметов и лута на уровне или в зонах.

<figure><img src="../../../.gitbook/assets/image (109).png" alt=""><figcaption></figcaption></figure>

В сокете доступны две переменные:

#### Переменные сокета

* **`bool CanSpawnBox`** — определяет, можно ли заспавнить ящик на данном сокете.
* **`bool LootSocket`** — косметическая переменная, которая изменяет название сокета. Это помогает быстрее находить ошибки или понимать назначение сокета.

#### Настройка предметов и лута

Спавн предметов и лута необходимо настроить в таблице по пути:

* `ProtocolTerminate/Data/SpawnItemData`

Для настройки спавна предметов вам понадобятся следующие переменные:

1. **BoxCountToSpawn** – количество коробок, которое будет заспавнено в зоне.
2. **ItemClass** – массив, в котором указываются классы предметов и их количество.

При настройке важно заранее рассчитать примерное количество сокетов, так как некорректное их количество может привести к ошибкам в спавне.

<figure><img src="../../../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

Для настройки спавна лута в этой же таблице используйте следующие переменные:

1. **RareItemsCount** – определяет количество случайных предметов из категории _Rare_ (Enum Rare) из таблицы **DT\_LootCostTable**, расположенной по пути `ProtocolTerminate/Data/LootCostTable`.
2.  **TotalLootCost** – задаёт общую стоимость лута. Если количество сокетов или доступных предметов в **DT\_LootCostTable** недостаточно для составления корректного списка предметов, система не сможет сформировать список так, чтобы итоговая стоимость лута отклонялась от заданной не более чем на ±10% или равнялась ей.\


    <figure><img src="../../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>
